import{$ as s,g as O,_ as L,u as E,d as k,p as P}from"./util-2e935f4f.js";window.onload=async()=>{const l=s("#graphic"),n=O(),h=(e,t)=>{n.set(e,t),E(n)},{entries:d}=await L(()=>import("./config-08e1e449.js"),[]),p=Object.keys(d);let a=n.get("entry")??p[0];Object.hasOwn(d,a)||(a=p[0],h("entry",a));const g=s("#view-raw"),o=s("#url-input"),u=s("#copy-url-button");let i;const v=(e,t={})=>{let r="";Object.keys(t).length>0&&(r=`?${new URLSearchParams(t).toString()}`),g.href=`graphic/${e}${r}`,o.value=g.href,o.size=o.value.length,u.textContent="Copy",h("entry",e),a=e,i&&i.remove(),["hed","dek","note","source","byline"].forEach(f=>{s(`#${f}-checkbox`).disabled=!Object.hasOwn(d[e],f)}),i=new P.Parent("graphic",g.href,{})},y=Array.from(s(".options#display").children),m=()=>Object.fromEntries(y.filter(e=>n.has(e.name)).map(e=>[e.name,n.get(e.name)]));y.forEach(e=>{n.has(e.name)&&(e.checked=n.get(e.name)==="true"),e.addEventListener("change",({target:{name:t,checked:r}})=>{t==="home"&&!r||t!=="home"&&r?n.delete(t):(t==="home"&&r||t!=="home"&&!r)&&n.set(t,r),E(n),v(a,m())})}),v(a,m());const w=s("#entrypoint-select");p.forEach(e=>{const t=document.createElement("option");t.value=e,t.textContent=e,e===a&&(t.selected=!0),w.appendChild(t)}),w.disabled=Object.keys(d).length<2,w.addEventListener("change",e=>{v(e.target.value,m())});const c=e=>{l.style.width=`${e}px`,h("width",e)};n.has("width")&&c(n.get("width")),new ResizeObserver(k(([e])=>{c(e.contentRect.width)})).observe(l),s("#desktop-preview").addEventListener("click",()=>{c(780)}),s("#small-mobile-preview").addEventListener("click",()=>{c(288)}),s("#large-mobile-preview").addEventListener("click",()=>{c(338)}),u.addEventListener("click",()=>{o.select(),o.setSelectionRange(0,o.value.length),document.execCommand("copy"),u.textContent="Copied!"});const b=e=>JSON.stringify({entry:a,format:e,width:l.clientWidth});s("#download-png").addEventListener("click",()=>{i.sendMessage("download",b("png"))}),s("#download-svg").addEventListener("click",()=>{i.sendMessage("download",b("svg"))})};
